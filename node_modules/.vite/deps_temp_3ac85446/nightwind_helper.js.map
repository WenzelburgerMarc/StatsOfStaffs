{
  "version": 3,
  "sources": ["../../nightwind/helper.js"],
  "sourcesContent": ["module.exports = {\n  init: () => {\n    const codeToRunOnClient = `\n      (function() {\n        function getInitialColorMode() {\n                const persistedColorPreference = window.localStorage.getItem('nightwind-mode');\n                const hasPersistedPreference = typeof persistedColorPreference === 'string';\n                if (hasPersistedPreference) {\n                  return persistedColorPreference;\n                }\n                const mql = window.matchMedia('(prefers-color-scheme: dark)');\n                const hasMediaQueryPreference = typeof mql.matches === 'boolean';\n                if (hasMediaQueryPreference) {\n                  return mql.matches ? 'dark' : 'light';\n                }\n                return 'light';\n        }\n        getInitialColorMode() == 'light' ? document.documentElement.classList.remove('dark') : document.documentElement.classList.add('dark');\n      })()\n    `;\n    return codeToRunOnClient;\n  },\n  \n  beforeTransition: () => {\n    const doc = document.documentElement;\n    const onTransitionDone = () => {\n      doc.classList.remove('nightwind');\n      doc.removeEventListener('transitionend', onTransitionDone);\n    }\n    doc.addEventListener('transitionend', onTransitionDone);\n    if (!doc.classList.contains('nightwind')) {\n      doc.classList.add('nightwind');\n    }\n  },\n\n  toggle: () => {\n    module.exports.beforeTransition();\n    if (!document.documentElement.classList.contains('dark')) {\n      document.documentElement.classList.add('dark');\n      window.localStorage.setItem('nightwind-mode', 'dark');\n    } else {\n        document.documentElement.classList.remove('dark');\n        window.localStorage.setItem('nightwind-mode', 'light');\n    }\n  },\n  \n  enable: (dark) => {\n    const mode = dark ? \"dark\" : \"light\";\n    const opposite = dark ? \"light\" : \"dark\";\n\n    module.exports.beforeTransition();\n\n    if (document.documentElement.classList.contains(opposite)) {\n      document.documentElement.classList.remove(opposite);\n    }\n    document.documentElement.classList.add(mode);\n    window.localStorage.setItem('nightwind-mode', mode);\n  },\n\n  // Old\n\n  checkNightMode: () => {\n    return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n  },\n\n  watchNightMode: () => {\n    if (!window.matchMedia) return;\n    window.matchMedia('(prefers-color-scheme: dark)').addListener(module.exports.addNightModeSelector());\n  },\n\n  addNightModeSelector: () => {\n    if (module.exports.checkNightMode()) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  },\n\n  addNightTransitions: () => {\n    if (!document.documentElement.classList.contains('nightwind')) {\n      document.documentElement.classList.add('nightwind');\n    }\n  },\n\n  initNightwind: () => {\n    module.exports.watchNightMode();\n    module.exports.addNightModeSelector();\n    module.exports.addNightTransitions();\n  },\n\n  toggleNightMode: () => {\n    if (!document.documentElement.classList.contains('dark')) {\n      document.documentElement.classList.add('dark');\n      window.localStorage.setItem('nightwind-mode', 'dark');\n    } else {\n        document.documentElement.classList.remove('dark');\n        window.localStorage.setItem('nightwind-mode', 'light');\n    }\n  },\n}\n"],
  "mappings": ";;;;;AAAA;AAAA;AAAA,WAAO,UAAU;AAAA,MACf,MAAM,MAAM;AACV,cAAM,oBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkB1B,eAAO;AAAA,MACT;AAAA,MAEA,kBAAkB,MAAM;AACtB,cAAM,MAAM,SAAS;AACrB,cAAM,mBAAmB,MAAM;AAC7B,cAAI,UAAU,OAAO,WAAW;AAChC,cAAI,oBAAoB,iBAAiB,gBAAgB;AAAA,QAC3D;AACA,YAAI,iBAAiB,iBAAiB,gBAAgB;AACtD,YAAI,CAAC,IAAI,UAAU,SAAS,WAAW,GAAG;AACxC,cAAI,UAAU,IAAI,WAAW;AAAA,QAC/B;AAAA,MACF;AAAA,MAEA,QAAQ,MAAM;AACZ,eAAO,QAAQ,iBAAiB;AAChC,YAAI,CAAC,SAAS,gBAAgB,UAAU,SAAS,MAAM,GAAG;AACxD,mBAAS,gBAAgB,UAAU,IAAI,MAAM;AAC7C,iBAAO,aAAa,QAAQ,kBAAkB,MAAM;AAAA,QACtD,OAAO;AACH,mBAAS,gBAAgB,UAAU,OAAO,MAAM;AAChD,iBAAO,aAAa,QAAQ,kBAAkB,OAAO;AAAA,QACzD;AAAA,MACF;AAAA,MAEA,QAAQ,CAAC,SAAS;AAChB,cAAM,OAAO,OAAO,SAAS;AAC7B,cAAM,WAAW,OAAO,UAAU;AAElC,eAAO,QAAQ,iBAAiB;AAEhC,YAAI,SAAS,gBAAgB,UAAU,SAAS,QAAQ,GAAG;AACzD,mBAAS,gBAAgB,UAAU,OAAO,QAAQ;AAAA,QACpD;AACA,iBAAS,gBAAgB,UAAU,IAAI,IAAI;AAC3C,eAAO,aAAa,QAAQ,kBAAkB,IAAI;AAAA,MACpD;AAAA;AAAA,MAIA,gBAAgB,MAAM;AACpB,eAAO,OAAO,cAAc,OAAO,WAAW,8BAA8B,EAAE;AAAA,MAChF;AAAA,MAEA,gBAAgB,MAAM;AACpB,YAAI,CAAC,OAAO;AAAY;AACxB,eAAO,WAAW,8BAA8B,EAAE,YAAY,OAAO,QAAQ,qBAAqB,CAAC;AAAA,MACrG;AAAA,MAEA,sBAAsB,MAAM;AAC1B,YAAI,OAAO,QAAQ,eAAe,GAAG;AACnC,mBAAS,gBAAgB,UAAU,IAAI,MAAM;AAAA,QAC/C,OAAO;AACL,mBAAS,gBAAgB,UAAU,OAAO,MAAM;AAAA,QAClD;AAAA,MACF;AAAA,MAEA,qBAAqB,MAAM;AACzB,YAAI,CAAC,SAAS,gBAAgB,UAAU,SAAS,WAAW,GAAG;AAC7D,mBAAS,gBAAgB,UAAU,IAAI,WAAW;AAAA,QACpD;AAAA,MACF;AAAA,MAEA,eAAe,MAAM;AACnB,eAAO,QAAQ,eAAe;AAC9B,eAAO,QAAQ,qBAAqB;AACpC,eAAO,QAAQ,oBAAoB;AAAA,MACrC;AAAA,MAEA,iBAAiB,MAAM;AACrB,YAAI,CAAC,SAAS,gBAAgB,UAAU,SAAS,MAAM,GAAG;AACxD,mBAAS,gBAAgB,UAAU,IAAI,MAAM;AAC7C,iBAAO,aAAa,QAAQ,kBAAkB,MAAM;AAAA,QACtD,OAAO;AACH,mBAAS,gBAAgB,UAAU,OAAO,MAAM;AAChD,iBAAO,aAAa,QAAQ,kBAAkB,OAAO;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAAA;AAAA;",
  "names": []
}
